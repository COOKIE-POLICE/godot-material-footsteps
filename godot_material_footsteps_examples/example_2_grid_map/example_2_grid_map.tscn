[gd_scene load_steps=12 format=3 uid="uid://dp6lkpgcj4qyt"]

[ext_resource type="MeshLibrary" uid="uid://cabegce78rkb3" path="res://godot_material_footsteps_examples/example_2_grid_map/tiles/tiles.tres" id="1_8ig2u"]
[ext_resource type="PackedScene" uid="uid://bs72ogkvdd7d6" path="res://godot_material_footsteps_examples/common/proto_controller/proto_controller.tscn" id="2_uiqiq"]
[ext_resource type="Script" uid="uid://jy4sym0dop3s" path="res://addons/godot_material_footsteps/core/material_footstep_player_3d.gd" id="3_rsg6y"]
[ext_resource type="Script" uid="uid://cfs28riswyejx" path="res://addons/godot_material_footsteps/resources/material_footstep.gd" id="4_qp77l"]
[ext_resource type="AudioStream" uid="uid://cy26rdy8dg0o6" path="res://godot_material_footsteps_examples/common/assets/sfx/grass.wav" id="5_31das"]
[ext_resource type="AudioStream" uid="uid://77a8byc3druy" path="res://godot_material_footsteps_examples/common/assets/sfx/concrete.wav" id="6_u0qau"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_iy2wk"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_kv1td"]
sky_material = SubResource("ProceduralSkyMaterial_iy2wk")

[sub_resource type="Environment" id="Environment_p55x5"]
background_mode = 2
sky = SubResource("Sky_kv1td")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="Resource" id="Resource_3qpdu"]
script = ExtResource("4_qp77l")
material_name = "Grass"
movement_sound = ExtResource("5_31das")
landing_sound = ExtResource("5_31das")
metadata/_custom_type_script = "uid://cfs28riswyejx"

[sub_resource type="Resource" id="Resource_ieuuv"]
script = ExtResource("4_qp77l")
material_name = "Concrete"
movement_sound = ExtResource("6_u0qau")
landing_sound = ExtResource("6_u0qau")
metadata/_custom_type_script = "uid://cfs28riswyejx"

[node name="Example2GridMap" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_p55x5")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="GridMap" type="GridMap" parent="."]
mesh_library = ExtResource("1_8ig2u")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(65532, 65535, 655361, 65533, 65535, 655361, 65534, 65535, 655361, 65535, 65535, 655361, 0, 65535, 655361, 1, 65535, 655361, 2, 65535, 655361, 3, 65535, 655361, 3, 0, 655361, 3, 1, 655361, 3, 2, 655361, 3, 3, 655361, 2, 3, 655361, 2, 4, 655361, 3, 4, 655361, 1, 4, 655361, 1, 5, 655361, 0, 5, 655361, 65535, 5, 655361, 65534, 5, 655361, 65533, 5, 655361, 65533, 4, 655361, 65532, 4, 655361, 65532, 3, 655361, 65532, 2, 655361, 65532, 1, 655361, 65532, 0, 655361, 65531, 65535, 655361, 65531, 2, 655361, 65531, 0, 655361, 65531, 1, 655361, 65531, 3, 655361, 65531, 4, 655361, 65531, 5, 655361, 65532, 5, 655361, 2, 5, 655361, 3, 5, 655361, 2, 2, 655361, 2, 1, 655361, 2, 0, 655361, 1, 0, 655361, 0, 0, 655361, 65535, 0, 655361, 65534, 0, 655361, 65533, 0, 655361, 65533, 1, 655361, 65533, 2, 655361, 65533, 3, 655361, 65534, 4, 655361, 65535, 4, 655361, 0, 4, 655361, 0, 3, 655361, 1, 3, 655361, 1, 2, 655361, 1, 1, 655361, 0, 1, 655361, 65535, 1, 655361, 65534, 1, 655361, 65534, 2, 655361, 65535, 2, 655361, 65535, 3, 655361, 0, 2, 655361, 65534, 3, 655361, 65531, 65534, 655361, 65531, 65533, 655361, 65531, 65532, 458752, 65532, 65532, 458752, 65533, 65532, 458752, 65534, 65532, 458752, 65535, 65532, 458752, 0, 65532, 458752, 1, 65532, 458752, 2, 65532, 458752, 3, 65532, 458752, 3, 65533, 655361, 3, 65534, 655361, 2, 65534, 655361, 1, 65534, 655361, 0, 65534, 655361, 65535, 65534, 655361, 65534, 65534, 655361, 65533, 65534, 655361, 65533, 65533, 655361, 65532, 65534, 655361, 65532, 65533, 655361, 65534, 65533, 655361, 65535, 65533, 655361, 0, 65533, 655361, 2, 65533, 655361, 1, 65533, 1245185, 65531, 65531, 458752, 65531, 65530, 458752, 65531, 65528, 458752, 65531, 65527, 458752, 65531, 65526, 458752, 65531, 65525, 458752, 65531, 65524, 458752, 65531, 65523, 458752, 65532, 65523, 458752, 65533, 65523, 458752, 65534, 65523, 458752, 65534, 65524, 1310720, 65535, 65524, 1310720, 0, 65524, 1310720, 1, 65524, 1310720, 1, 65523, 1310720, 0, 65523, 458752, 65535, 65523, 458752, 2, 65523, 1310720, 3, 65523, 458752, 3, 65524, 458752, 3, 65525, 458752, 3, 65526, 458752, 3, 65527, 458752, 3, 65528, 458752, 3, 65529, 458752, 3, 65530, 458752, 3, 65531, 458752, 2, 65531, 458752, 65532, 65531, 458752, 65533, 65531, 1310720, 65534, 65531, 458752, 65535, 65531, 458752, 0, 65531, 458752, 1, 65531, 458752, 65531, 65529, 1310720, 65532, 65530, 1310720, 65532, 65529, 1310720, 65532, 65528, 1310720, 65532, 65527, 1310720, 65532, 65526, 1310720, 65532, 65525, 1310720, 65532, 65524, 1310720, 65533, 65524, 1310720, 65534, 65525, 1310720, 65534, 65526, 1310720, 65534, 65527, 1310720, 65534, 65528, 1310720, 65533, 65528, 1310720, 65533, 65529, 1310720, 65533, 65530, 1310720, 65533, 65527, 1310720, 65533, 65526, 1310720, 65533, 65525, 1310720, 65535, 65527, 1310720, 65535, 65528, 1310720, 65535, 65529, 1310720, 65535, 65530, 1310720, 65534, 65530, 1310720, 65534, 65529, 1310720, 0, 65529, 1310720, 0, 65530, 1310720, 1, 65530, 1310720, 2, 65530, 1310720, 2, 65529, 1310720, 2, 65528, 1310720, 2, 65527, 1310720, 2, 65526, 1310720, 2, 65525, 1310720, 2, 65524, 1310720, 65535, 65525, 1310720, 65535, 65526, 1310720, 0, 65527, 1310720, 0, 65526, 1310720, 0, 65525, 1310720, 0, 65528, 1310720, 1, 65529, 1310720, 1, 65528, 1310720, 1, 65527, 1310720, 1, 65526, 1310720, 1, 65525, 1310720, 131067, 65522, 262145, 131068, 65522, 262145, 131069, 65522, 1114113, 131070, 65522, 1114113, 131071, 65522, 1114113, 65536, 65522, 1114113, 65537, 65522, 1114113, 65538, 65522, 1114113, 65539, 65522, 1114113, 65539, 65521, 262145, 65539, 65520, 262145, 65539, 65519, 262145, 65539, 65518, 262145, 65539, 65517, 262145, 65539, 65516, 262145, 65538, 65516, 262145, 65537, 65516, 262145, 65536, 65516, 262145, 131071, 65516, 262145, 131070, 65516, 262145, 131069, 65516, 262145, 131068, 65516, 262145, 131067, 65516, 262145, 131067, 65517, 262145, 131067, 65518, 262145, 131067, 65519, 262145, 131067, 65520, 262145, 131067, 65521, 262145, 131068, 65521, 262145, 131069, 65521, 262145, 131070, 65521, 262145, 131071, 65521, 262145, 65536, 65521, 262145, 65537, 65521, 262145, 65538, 65521, 262145, 65538, 65520, 262145, 65538, 65519, 262145, 65538, 65518, 262145, 65538, 65517, 262145, 65537, 65517, 262145, 65536, 65517, 262145, 65536, 65518, 262145, 65536, 65519, 262145, 65537, 65519, 262145, 65537, 65520, 262145, 65536, 65520, 262145, 65537, 65518, 262145, 131071, 65519, 262145, 131071, 65520, 262145, 131070, 65519, 262145, 131071, 65518, 262145, 131071, 65517, 262145, 131070, 65520, 262145, 131069, 65520, 262145, 131069, 65519, 262145, 131069, 65518, 262145, 131070, 65518, 262145, 131070, 65517, 262145, 131069, 65517, 262145, 131068, 65519, 262145, 131068, 65520, 262145, 131068, 65518, 262145, 131068, 65517, 262145)
}
metadata/_editor_floor_ = Vector3(0, 1, 0)

[node name="ProtoController" parent="." instance=ExtResource("2_uiqiq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.09626, 0)

[node name="MaterialFootstepPlayer3D" type="RayCast3D" parent="ProtoController" node_paths=PackedStringArray("character")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.456303, 0)
script = ExtResource("3_rsg6y")
character = NodePath("..")
material_footstep_sound_map = Array[ExtResource("4_qp77l")]([SubResource("Resource_3qpdu"), SubResource("Resource_ieuuv")])
default_material_footstep_movement_sound = ExtResource("6_u0qau")
default_material_footstep_landing_sound = ExtResource("6_u0qau")
metadata/_custom_type_script = "uid://jy4sym0dop3s"

[node name="Tip1" type="Label3D" parent="."]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, -0.1, 5, 6.1)
pixel_size = 0.01
text = "This is Example 2. This solution uses the Godot GridMap system. You will see in editor that the GridMap tile names match the ones defined in the MaterialFootstepPlayer3D sound map (Child of the player)."
autowrap_mode = 3

[node name="Tip2" type="Label3D" parent="."]
transform = Transform3D(1.31134e-07, 0, 1, 0, 1, 0, -1, 0, 1.31134e-07, -4, 5, -8)
pixel_size = 0.01
text = "Wait, you are using HTerrain addon by Zylann or the built-in meta data system? No problem, my addon has support for those nodes too. Check the other examples for more info, or read the GitHub README like a sane person would (Granted if my lazy bum actually updated the README by the time you are reading this."
autowrap_mode = 3
